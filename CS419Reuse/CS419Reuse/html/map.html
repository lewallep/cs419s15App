<!DOCTYPE HTML />
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
    <script type="text/javascript" src="/js/jquery-2.1.4.min.js"></script>

    <script type="text/javascript">
        var map = null;
        var loc = null;
        var loc2;

        function GetMap() {

            map = new Microsoft.Maps.Map(document.getElementById("mapDiv"),
                              {
                                  credentials: "AhTTNOioICXvPRPUdr0_NAYWj64MuGK2msfRendz_fL9B1U6LGDymy2OhbGj7vhA",                    
                                  mapTypeId: Microsoft.Maps.MapTypeId.road,
                                  zoom: 12
                              });

            // Add a pin to the map
            loc = new Microsoft.Maps.Location(44.570780, -123.275998);
            var pin = new Microsoft.Maps.Pushpin(loc);
            map.entities.push(pin);


            // To center the map dynamicaly on our search results I think one way we can do it is to find the   
            // min and max of each latitude and longtitude using a foreach loop of the JSON search results, and then 
            // to use this is a boundary of the map field.  Then baesed on a computed distance I think we could work out 
            // an equation to set the zoom based off a distance as the bird flies.  
            // I "think" this should give us a nice dynamic map which displays the search results.
            var centerLoc = loc;

            // Center the map on the location
            map.setView({ center: centerLoc, zoom: 8 });
        }
    </script>
</head>
<body onload="GetMap();">
    <div onload="GetMap();" id='mapDiv'></div>
    <input id="txtQuery" type="text" value="Portland" />
    <input type="button" value="Geocode" onclick="ClickGeocode()" />    
</body>
</html>
